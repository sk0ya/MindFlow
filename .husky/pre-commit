#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” å‹å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..."

# TypeScriptå‹ãƒã‚§ãƒƒã‚¯
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ TypeScriptå‹ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã—ã¾ã—ãŸ"
  exit 1
fi

# ESLintå‹å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯
npm run lint:type-safety
if [ $? -ne 0 ]; then
  echo "âŒ ESLintå‹å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã—ã¾ã—ãŸ"
  exit 1
fi

# ã‚«ã‚¹ã‚¿ãƒ å±é™ºãƒ‘ã‚¿ãƒ¼ãƒ³ã‚¹ã‚­ãƒ£ãƒ³
npm run scan:unsafe-ci
if [ $? -ne 0 ]; then
  echo "âŒ å±é™ºãªå‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ"
  exit 1
fi

echo "âœ… å‹å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯å®Œäº†"